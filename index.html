<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover" />
    <title>Mangos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap" as="style">
    <link rel="modulepreload" href="./src/js/app.js">
    <link rel="modulepreload" href="./src/js/config.js">
    <link rel="modulepreload" href="./src/js/auth.js">
    <link rel="modulepreload" href="./src/js/utils.js">
    <link rel="modulepreload" href="./src/js/pull-to-refresh.js">

    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" href="/src/assets/favicon.png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/styles.css">

    <link rel="apple-touch-icon" href="src/assets/icon.png">
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Mangos" />
    <meta name="theme-color" content="#FFFFFF" />
    <link rel="apple-touch-startup-image" media="screen and (device-width: 440px) and (device-height: 956px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_17_Pro_Max__iPhone_16_Pro_Max_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 402px) and (device-height: 874px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_17_Pro__iPhone_17__iPhone_16_Pro_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_16_Plus__iPhone_15_Pro_Max__iPhone_15_Plus__iPhone_14_Pro_Max_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 420px) and (device-height: 912px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_Air_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_16__iPhone_15_Pro__iPhone_15__iPhone_14_Pro_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_14_Plus__iPhone_13_Pro_Max__iPhone_12_Pro_Max_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_16e__iPhone_14__iPhone_13_Pro__iPhone_13__iPhone_12_Pro__iPhone_12_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_13_mini__iPhone_12_mini__iPhone_11_Pro__iPhone_XS__iPhone_X_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_11_Pro_Max__iPhone_XS_Max_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/iPhone_11__iPhone_XR_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="src/assets/iPhone_8_Plus__iPhone_7_Plus__iPhone_6s_Plus__iPhone_6_Plus_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/iPhone_8__iPhone_7__iPhone_6s__iPhone_6__4.7__iPhone_SE_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/4__iPhone_SE__iPod_touch_5th_generation_and_later_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 1032px) and (device-height: 1376px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/13__iPad_Pro_M4_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/12.9__iPad_Pro_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1210px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/11__iPad_Pro_M4_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/11__iPad_Pro__10.5__iPad_Pro_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/10.9__iPad_Air_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/10.5__iPad_Air_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/10.2__iPad_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/9.7__iPad_Pro__7.9__iPad_mini__9.7__iPad_Air__9.7__iPad_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="src/assets/8.3__iPad_Mini_landscape.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 440px) and (device-height: 956px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_17_Pro_Max__iPhone_16_Pro_Max_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 402px) and (device-height: 874px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_17_Pro__iPhone_17__iPhone_16_Pro_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_16_Plus__iPhone_15_Pro_Max__iPhone_15_Plus__iPhone_14_Pro_Max_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 420px) and (device-height: 912px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_Air_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_16__iPhone_15_Pro__iPhone_15__iPhone_14_Pro_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_14_Plus__iPhone_13_Pro_Max__iPhone_12_Pro_Max_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_16e__iPhone_14__iPhone_13_Pro__iPhone_13__iPhone_12_Pro__iPhone_12_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_13_mini__iPhone_12_mini__iPhone_11_Pro__iPhone_XS__iPhone_X_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_11_Pro_Max__iPhone_XS_Max_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/iPhone_11__iPhone_XR_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="src/assets/iPhone_8_Plus__iPhone_7_Plus__iPhone_6s_Plus__iPhone_6_Plus_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/iPhone_8__iPhone_7__iPhone_6s__iPhone_6__4.7__iPhone_SE_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/4__iPhone_SE__iPod_touch_5th_generation_and_later_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 1032px) and (device-height: 1376px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/13__iPad_Pro_M4_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/12.9__iPad_Pro_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1210px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/11__iPad_Pro_M4_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/11__iPad_Pro__10.5__iPad_Pro_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/10.9__iPad_Air_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/10.5__iPad_Air_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/10.2__iPad_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/9.7__iPad_Pro__7.9__iPad_mini__9.7__iPad_Air__9.7__iPad_portrait.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="src/assets/8.3__iPad_Mini_portrait.png">
</head>
<body>
    <main class="app-grid" id="mainApp" style="display: none;">
        <!-- Welcome Page -->
        <section id="welcomeSection" class="welcome-section" style="display: none;">
            <div class="welcome-content">
                <img src="src/assets/logo-512.jpg" alt="" width="128" height="128">
                <h2 class="welcome-title">Empezá a controlar tus <strong class="mangos-gradient-text">mangos</strong></h2>
                <div id="googleSignInContainer" class="google-signin-container"></div>
            </div>
        </section>

        <!-- Onboarding Loader Page -->
        <div id="onboardingLoader" class="onboarding-overlay" style="display: none;">
            <div class="onboarding-content">
                <img src="src/assets/logo-512.jpg" alt="" width="128" height="128">
                <h3>Preparando tu espacio</h3>
                <p id="onboardingStatus">Creando tu sheet personal...</p>
            </div>
        </div>

        <!-- Setup Choice Section -->
        <section id="setupChoiceSection" class="welcome-section" style="display: none;">
            <div class="welcome-content">
                <img src="src/assets/logo-512.jpg" alt="" width="128" height="128">
                <h2 class="welcome-title" style="margin-bottom: 20px;">¿Cómo querés empezar?</h2>
                <p style="color: var(--text-muted); margin-bottom: 32px;">Elegí si querés crear un sheet nuevo o usar uno que ya tengas.</p>
                <div style="display: flex; flex-direction: column; gap: 16px; width: 100%; max-width: 320px;">
                    <button id="setupCreateBtn" class="btn-neo" style="width: 100%; padding: 16px;">
                        Crear nuevo
                    </button>
                    <button id="setupExistingBtn" class="btn-neo" style="width: 100%; padding: 16px; background: var(--main); color: var(--bg-primary); border: none;">
                        Ya tengo
                    </button>
                </div>
            </div>
        </section>

        <!-- Home Page -->
        <div id="home" class="home home--entering page-on">
            <header class="header-bento">
                <!-- Pull-to-Refresh Indicator -->
                <div id="pullToRefreshIndicator" class="ptr-indicator">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-down" class="lucide lucide-arrow-down ptr-arrow ptr-arrow-down"><path d="M12 5v14"></path><path d="m19 12-7 7-7-7"></path></svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-up" class="lucide lucide-arrow-up ptr-arrow ptr-arrow-up hidden"><path d="m5 12 7-7 7 7"></path><path d="M12 19V5"></path></svg>
                </div>

                <h1>
                    <img src="src/assets/logo-512.jpg" alt="Mangos" width="48" height="48">
                </h1>
                <div class="header-actions" style="display: flex; align-items: center;">
                    <strong class="badge-current-month"></strong>
                    <a href="/sheet" class="btn-icon link" aria-label="Gastos">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-receipt-text-icon lucide-receipt-text"><path class="animate-receipt-line" d="M8 16H13"/><path class="animate-receipt-line" d="M8 8H14"/><path class="animate-receipt-line" d="M8 12H16"/><path d="M4 3a1 1 0 0 1 1-1 1.3 1.3 0 0 1 .7.2l.933.6a1.3 1.3 0 0 0 1.4 0l.934-.6a1.3 1.3 0 0 1 1.4 0l.933.6a1.3 1.3 0 0 0 1.4 0l.933-.6a1.3 1.3 0 0 1 1.4 0l.934.6a1.3 1.3 0 0 0 1.4 0l.933-.6A1.3 1.3 0 0 1 19 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1 1.3 1.3 0 0 1-.7-.2l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.934.6a1.3 1.3 0 0 1-1.4 0l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-1.4 0l-.934-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-.7.2 1 1 0 0 1-1-1z"/></svg>
                    </a>
                    <button id="settingsBtn" class="btn-icon" aria-label="Settings">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="settings" class="lucide lucide-settings"><path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"></path><circle cx="12" cy="12" r="3"></circle></svg>
                    </button>
                </div>
            </header>

            <!-- Input Bento -->
            <section class="bento-card input-bento">
                <div class="greeting-section">
                    <h2 id="userGreeting">Hola</h2>
                    <p id="greetingText" class="subtitle">¿Cuántos gastaste?</p>
                </div>

                <!-- Unified Input Interface -->
                <div class="unified-input-container">
                    <!-- Voice/Tap Button -->
                    <div class="voice-nexus">
                        <button id="unifiedInputBtn" class="btn-voice-main" aria-label="Tap para texto, mantén presionado para voz">
                            <div class="blob-container">
                                <div class="blob"></div>
                                <div class="blob"></div>
                                <div class="blob"></div>
                            </div>
                            <div class="btn-spinner"></div>
                            <div id="voiceOrb" class="voiceOrb-container">
                                <video class="voiceOrb-video" src="src/assets/orbe.mp4" preload="metadata" autoplay muted loop playsinline></video>
                            </div>
                        </button>
                        <small id="voiceHint" class="voice-hint">Presioná, escribí • Mantené, hablá</small>
                    </div>

                    <!-- Text Input (hidden by default) -->
                    <div class="text-input-section hidden" id="textInputSection">
                        <label for="textInput" class="hidden">Ingresar gasto</label>
                        <textarea id="textInput" placeholder="$50000 en el super..."></textarea>
                        <button id="submitTextBtn" class="btn-neo">
                            <span class="btn-text">Cargar</span>
                            <div class="btn-spinner"></div>
                        </button>
                    </div>

                    <!-- Result Bento (Inline) -->
                    <section class="result-bento hidden" id="resultsPanel" style="flex: 1; display: flex; flex-direction: column; justify-content: end;">
                        <h2 style="font-size: 0.7rem; text-transform: uppercase; opacity: 0.5; margin-bottom: 20px; letter-spacing: 0.1em;">Gastos</h2>
                        <div id="aiResponse"></div>
                        <div class="actions-bento">
                            <button id="confirmBtn" class="btn-neo btn-save" disabled>
                                <span class="btn-text">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="check" style="width: 18px; height: 18px;" class="lucide lucide-check"><path d="M20 6 9 17l-5-5"></path></svg>
                                    Guardar
                                </span>
                                <div class="btn-spinner"></div>
                            </button>
                            <button id="rejectBtn" class="btn-neo btn-reject" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="trash-2" style="width: 18px; height: 18px;" class="lucide lucide-trash-2"><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M3 6h18"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg> Borrar
                            </button>
                        </div>
                    </section>
                </div>
            </section>
        </div>

        <!-- Sheet Page -->
        <div id="sheet" class="page" hidden>
            <header class="header-bento">
                <div style="display: flex; align-items: center; gap: 0;">
                    <a href="/" class="btn-icon link" aria-label="Volver">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-left" class="lucide lucide-arrow-left"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>
                    </a>
                    <h1>Gastos</h1>
                </div>
                <div class="header-actions" style="display: flex; align-items: center;">
                    <button id="visibilityToggleBtn" class="btn-icon" aria-label="Toggle Visibility" title="Mostrar/Ocultar montos">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="eyeOpenIcon" class="lucide lucide-eye"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0z"/><circle cx="12" cy="12" r="3"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="eyeClosedIcon" class="lucide lucide-eye-off hidden"><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.52 13.52 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/></svg>
                    </button>
                </div>
            </header>
            <section class="summary-bento">
                <div class="summary-card card-gastos">
                    <h2>Total</h2>
                    <div id="val-gastado" class="summary-value">
                        <span class="value-real"><div class="skeleton" style="width: 85px; height: 1.3rem;"></div></span>
                        <span class="value-placeholder">$ •••</span>
                    </div>
                </div>
                <div id="cardDisponible" class="summary-card card-disponible" style="display: none;">
                    <h2>Disponible</h2>
                    <div id="val-disponible" class="summary-value">
                        <span class="value-real"><div class="skeleton" style="width: 85px; height: 1.3rem;"></div></span>
                        <span class="value-placeholder">$ •••</span>
                    </div>
                </div>
            </section>

            <section class="bento-card table-bento-container">
                <div id="sheetDataContainer" class="table-scroll">
                    <table class="neo-table">
                        <thead>
                            <tr>
                                <th>Concepto</th>
                                <th class="text-right">Monto</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><div class="skeleton skeleton-text"></div></td><td class="text-right"><div class="skeleton skeleton-amount"></div></td></tr>
                            <tr><td><div class="skeleton skeleton-text" style="width: 45%;"></div></td><td class="text-right"><div class="skeleton skeleton-amount" style="width: 50px;"></div></td></tr>
                            <tr><td><div class="skeleton skeleton-text" style="width: 70%;"></div></td><td class="text-right"><div class="skeleton skeleton-amount" style="width: 70px;"></div></td></tr>
                            <tr><td><div class="skeleton skeleton-text" style="width: 40%;"></div></td><td class="text-right"><div class="skeleton skeleton-amount" style="width: 45px;"></div></td></tr>
                            <tr><td><div class="skeleton skeleton-text" style="width: 55%;"></div></td><td class="text-right"><div class="skeleton skeleton-amount" style="width: 65px;"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal Settings -->
    <div id="settingsModal" class="modal-neo">
        <div class="modal-content-neo">
            <h2 style="margin-bottom: 24px;">Configuración</h2>
            <form id="settingsForm">
                <div class="form-field">
                    <label>Spreadsheet URL</label>
                    <input type="text" id="sheetUrl" required placeholder="https://docs.google.com/spreadsheets/d/...">
                </div>
                <div class="form-field">
                    <label>Nombre de Hoja</label>
                    <div style="position: relative;">
                        <select id="sheetName" required class="input-neo" style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid var(--border-strong); font-family: inherit; font-weight: 600; background: #fff; appearance: none;">
                            <option value="" disabled selected>Ingresa URL primero...</option>
                        </select>
                        <div id="sheetLoading" class="btn-spinner" style="position: absolute; right: 10px; top: 12px; display: none; color: var(--accent);"></div>
                    </div>
                </div>
                <div class="form-field">
                    <label>Gemini API Key</label>
                    <input type="text" id="apiKey" placeholder="AIz...">
                </div>
                <div style="margin-top: 32px;">
                    <button type="submit" class="btn-neo">
                        <span class="btn-text">Guardar</span>
                        <div class="btn-spinner"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="toast" class="toast-neo"></div>

    <!-- Core Scripts -->
    <!-- SVG Filter for Gooey Effect -->
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="display: none;">
        <defs>
            <filter id="liquid-glass">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -10" result="goo" />
                <feComposite in="SourceGraphic" in2="goo" operator="atop" />
            </filter>
        </defs>
    </svg>

    <script type="module" src="src/js/app.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</body>
</html>
